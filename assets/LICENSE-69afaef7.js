(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();const F=r=>{try{return new URL(r),!0}catch{return!1}},P=(r=location)=>r.pathname+r.search+r.hash,k=r=>F(r)&&r.startsWith(location.origin)?P(new URL(r,location)):r,h=(r=location)=>typeof r=="string"?new URL(r,location):new URL(location),u="__$$PostDocClient$$NavigationManager",b="text/html",l={AfterTransition:"__$$after-transition",BeforeTransition:"__$$before-transition"},C=new DOMParser,m=new Set,O=(r,t)=>{throw new Error(`The navigation to the "${r}" fails with "${t}" status.`)},E=r=>{const t=document.createElement("script");return Array.from(r.attributes).forEach(({name:e,value:s})=>{t.setAttribute(e,e==="src"?k(s):s)}),t.append(document.createTextNode(r.textContent)),t},I=r=>{let t;const e=new Promise(s=>t=s);return r.addEventListener("load",function s(){t(),r==null||r.removeEventListener("load",s)}),r.addEventListener("error",function s(){r==null||r.removeEventListener("error",s)}),e},M=(r,t,e="deep")=>{const s=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT);let o;for(;o=s.nextNode();)(e==="deep"||r===o.parentNode)&&t(o)},U=r=>{const t=[],e=[],s=[];return M(r,o=>{L(o)?t.push(o):o.tagName==="SCRIPT"?S(o,i=>e.push(i)):(o.tagName==="NOSCRIPT"&&(o.textContent=o.innerHTML),s.push(o))},"shallow"),[t,e,s]},v=r=>r.tagName==="LINK"&&r.rel==="preconnect",L=r=>r.tagName==="LINK"&&r.rel==="stylesheet",S=(r,t,e)=>{const s=r.getAttribute("src");s&&!m.has(g(s))?(m.add(g(s)),t(E(r))):s?e==null||e(r):t(E(r))},w=(r,t)=>(e,s)=>{if(!e)return!1;const o=r(e);return o&&(t[s]=null),o},B=r=>{const t=[];return M(r,e=>{e.tagName==="SCRIPT"&&S(e,s=>t.push(()=>e.replaceWith(s)),s=>t.push(()=>s.remove()))}),[r,t]},R=/\.\.\//g,g=r=>r.replace(R,""),_=r=>(!m.size&&document.querySelectorAll("script[src]").forEach(s=>{const o=g(s.getAttribute("src"));m.add(o)}),fetch(r,{headers:{Accept:b}}).then(e=>e.ok?e.text():O(r,e.status)).then(async e=>{const s=C.parseFromString(e,b),o=document.adoptNode(s.head),i=document.adoptNode(s.body),[n,d,T]=U(o),f=[...document.head.children],y=n.filter(a=>!f.some(w(c=>L(c)&&a.href===c.href,f)));document.head.append(...y),await Promise.all(y.map(I)),Array.from(document.documentElement.attributes).forEach(({name:a})=>{const c=s.documentElement.getAttribute(a);c!==null?(document.documentElement.setAttribute(a,c),s.documentElement.removeAttribute(a)):document.documentElement.removeAttribute(a)}),Array.from(s.documentElement.attributes).forEach(({name:a,value:c})=>document.documentElement.setAttribute(a,c)),document.head.append(...d,...T.filter(a=>!(v(a)&&f.some(w(c=>v(c)&&a.href===c.href,f)))));const[A,x]=B(i);document.body.replaceWith(A),x.forEach(a=>a()),f.forEach(a=>{a&&a.remove()})})),p=(()=>{let r=[{url:h().href,index:0}],t=0;return addEventListener("load",()=>{const e=sessionStorage.getItem("history");if(e){const{stack:s,cursor:o}=JSON.parse(e);r=s,t=o}else sessionStorage.setItem("history",JSON.stringify({stack:r,cursor:t})),history.replaceState(r[0],r[0].url,r[0].url)}),{get stack(){return r},get cursor(){return t},set cursor(e){t=e,sessionStorage.setItem("history",JSON.stringify({stack:r,cursor:t}))},pushState(e,s,o,i=!0){t=r[r.length-1].index+1;const n={...e,index:t};r.push(n),sessionStorage.setItem("history",JSON.stringify({stack:r,cursor:t})),i&&history.pushState(n,s,o)},replaceState(e,s,o,i=!0){const n={...e,index:t};r[n.index]=n,sessionStorage.setItem("history",JSON.stringify({stack:r,cursor:t})),i&&history.replaceState(n,s,o)}}})(),N=()=>document.body.querySelectorAll("a[href]").forEach(r=>{const t=r.getAttribute("href");if(t&&r.host===location.host){if(r.setAttribute("data-link-internal",!0),t.startsWith("#"))return;r.addEventListener("click",async e=>{var s;if(e.preventDefault(),await globalThis[u].navigate(t),t.includes("#")){const o=r.hash.replace("#","");(s=document.querySelector(`[id="${o}"]`))==null||s.scrollIntoView();return}scrollTo(0,0),document.body.firstElementChild.focus()})}else r.setAttribute("data-link-external",!0)});if(!(u in globalThis)){const r=new Map([[l.AfterTransition,[]],[l.BeforeTransition,[]]]);window[u]={navigate:async(t,e=!1)=>{const s=h(t),o=h();await Promise.all(r.get(l.BeforeTransition).map(([i,{forPage:n,registeredOn:d}])=>{if(n instanceof RegExp&&n.test(o.href)||typeof n=="function"&&n(o)||!n&&d.pathname===o.pathname)return i(o,s)})),p[(e?"replace":"push")+"State"]({url:s.href},s.href,s.href),await _(s.pathname),N(),await Promise.all(r.get(l.AfterTransition).map(([i,{forPage:n,registeredOn:d}])=>{if(n instanceof RegExp&&n.test(s.href)||typeof n=="function"&&n(s)||!n&&d.pathname===s.pathname)return i(s)}))},registerEventListener:(t,e,s)=>{const o=h();return r.get(t).push([e,{...s,registeredOn:o}]),()=>void r.set(t,r.get(t).filter(([i])=>i!==e))}},addEventListener("popstate",({state:t})=>{const e=h();if(e.hash&&!t)return p.pushState({url:e.href},e.href,e.href,!1),p.replaceState({url:e.href},e.href,e.href);const s=p.stack[t.index].url;p.cursor=t.index,globalThis[u].navigate(s,!0)}),addEventListener("load",N)}const q=(r,t={})=>globalThis[u].registerEventListener(l.BeforeTransition,r,t),D=(r,t={})=>{const e=h(),{forPage:s}=t;return(s instanceof RegExp&&s.test(e.href)||typeof s=="function"&&s(e))&&r(e),globalThis[u].registerEventListener(l.AfterTransition,r,t)},W=r=>globalThis[u].navigate(r);class K{constructor(t,e){this.domNode=t,this.performMenuAction=e,this.buttonNode=t.querySelector("button"),this.menuNode=t.querySelector('[role="menu"]'),this.menuitemNodes=[],this.firstMenuitem=!1,this.lastMenuitem=!1,this.firstChars=[],this.buttonNode.addEventListener("keydown",this.onButtonKeydown.bind(this)),this.buttonNode.addEventListener("click",this.onButtonClick.bind(this));for(var s=t.querySelectorAll('[role="menuitem"]'),o=0;o<s.length;o++){var i=s[o];this.menuitemNodes.push(i),i.tabIndex=-1,this.firstChars.push(i.textContent.trim()[0].toLowerCase()),i.addEventListener("keydown",this.onMenuitemKeydown.bind(this)),i.addEventListener("click",this.onMenuitemClick.bind(this)),i.addEventListener("mouseover",this.onMenuitemMouseover.bind(this)),this.firstMenuitem||(this.firstMenuitem=i),this.lastMenuitem=i}t.addEventListener("focusin",this.onFocusin.bind(this)),t.addEventListener("focusout",this.onFocusout.bind(this)),window.addEventListener("mousedown",this.onBackgroundMousedown.bind(this),!0)}setFocusToMenuitem(t){this.menuitemNodes.forEach(function(e){e===t?(e.tabIndex=0,t.focus()):e.tabIndex=-1})}setFocusToFirstMenuitem(){this.setFocusToMenuitem(this.firstMenuitem)}setFocusToLastMenuitem(){this.setFocusToMenuitem(this.lastMenuitem)}setFocusToPreviousMenuitem(t){var e,s;return t===this.firstMenuitem?e=this.lastMenuitem:(s=this.menuitemNodes.indexOf(t),e=this.menuitemNodes[s-1]),this.setFocusToMenuitem(e),e}setFocusToNextMenuitem(t){var e,s;return t===this.lastMenuitem?e=this.firstMenuitem:(s=this.menuitemNodes.indexOf(t),e=this.menuitemNodes[s+1]),this.setFocusToMenuitem(e),e}setFocusByFirstCharacter(t,e){var s,o;e.length>1||(e=e.toLowerCase(),s=this.menuitemNodes.indexOf(t)+1,s>=this.menuitemNodes.length&&(s=0),o=this.firstChars.indexOf(e,s),o===-1&&(o=this.firstChars.indexOf(e,0)),o>-1&&this.setFocusToMenuitem(this.menuitemNodes[o]))}getIndexFirstChars(t,e){for(var s=t;s<this.firstChars.length;s++)if(e===this.firstChars[s])return s;return-1}openPopup(){this.menuNode.style.display="block",this.buttonNode.setAttribute("aria-expanded","true")}closePopup(){this.isOpen()&&(this.buttonNode.removeAttribute("aria-expanded"),this.menuNode.style.display="none")}isOpen(){return this.buttonNode.getAttribute("aria-expanded")==="true"}onFocusin(){this.domNode.classList.add("focus")}onFocusout(){this.domNode.classList.remove("focus")}onButtonKeydown(t){var e=t.key,s=!1;switch(e){case" ":case"Enter":case"ArrowDown":case"Down":this.openPopup(),this.setFocusToFirstMenuitem(),s=!0;break;case"Esc":case"Escape":this.closePopup(),s=!0;break;case"Up":case"ArrowUp":this.openPopup(),this.setFocusToLastMenuitem(),s=!0;break}s&&(t.stopPropagation(),t.preventDefault())}onButtonClick(t){this.isOpen()?(this.closePopup(),this.buttonNode.focus()):(this.openPopup(),this.setFocusToFirstMenuitem()),t.stopPropagation(),t.preventDefault()}onMenuitemKeydown(t){var e=t.currentTarget,s=t.key,o=!1;function i(n){return n.length===1&&n.match(/\S/)}if(!(t.ctrlKey||t.altKey||t.metaKey)){if(t.shiftKey)i(s)&&(this.setFocusByFirstCharacter(e,s),o=!0),t.key==="Tab"&&(this.buttonNode.focus(),this.closePopup(),o=!0);else switch(s){case" ":case"Enter":this.closePopup(),this.performMenuAction(e),this.buttonNode.focus(),o=!0;break;case"Esc":case"Escape":this.closePopup(),this.buttonNode.focus(),o=!0;break;case"Up":case"ArrowUp":this.setFocusToPreviousMenuitem(e),o=!0;break;case"ArrowDown":case"Down":this.setFocusToNextMenuitem(e),o=!0;break;case"Home":case"PageUp":this.setFocusToFirstMenuitem(),o=!0;break;case"End":case"PageDown":this.setFocusToLastMenuitem(),o=!0;break;case"Tab":this.closePopup();break;default:i(s)&&(this.setFocusByFirstCharacter(e,s),o=!0);break}o&&(t.stopPropagation(),t.preventDefault())}}onMenuitemClick(t){var e=t.currentTarget;this.closePopup(),this.buttonNode.focus(),this.performMenuAction(e)}onMenuitemMouseover(t){var e=t.currentTarget;e.focus()}onBackgroundMousedown(t){this.domNode.contains(t.target)||this.isOpen()&&(this.closePopup(),this.buttonNode.focus())}}function $(){var r=document.querySelectorAll(".release-button-action");function t(s){window.location.href=s.children[0].href}for(var e=0;e<r.length;e++)new K(r[e],t)}D(()=>{$()},{forPage:()=>!0});export{q as a,W as n,D as o};
